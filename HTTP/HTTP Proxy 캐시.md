- 작성일: 2023-05-04
- 태그: 
- 분류
    - [HTTP 캐시](HTTP%20캐시.md)
- 관련 노트
---

```
+-----------------+        +-----------------+        +-----------------+
|                 |        |                 |        |                 |
|   Web Browser   | <----> |     Proxy       | <----> |  Origin Server  |
|                 |        |                 |        |                 |
|  Private Cache  |        |   Public Cache  |        |                 |
+-----------------+        +-----------------+        +-----------------+
      ^  ^                      ^  ^                      ^  ^
      |  |                      |  |                      |  |
      |  +----------------------+  +----------------------+  |
      |                         |                         |
      +-------------------------+                         |
                            cache hit                     |
                                                          |
                                                          |
                                                          v
                                                     cache miss
```

Proxy 캐시에 대해 알아보겠습니다.

---
# 필요성

한국에서 미국에 있는 서버에서 받는 것은 느리기 때문에, 캐시를 검증하는 작업 역시 느릴 수 밖에 없습니다. 이를 해결하기 위해 중간에 서버를 하나 두어 반응속도를 빠르게 할 필요가 있습니다.

---

# Cache-Control

- `Cache-Control: public `
    - 응답이 public 캐시에 저장되어도 됩니다.
- `Cache-Control: private `
    - 응답이 해당 사용자만을 위한 것이므로, private 캐시에 저장해야 합니다(기본값) 
- `Cache-Control: s-maxage`
    - 프록시 캐시에만 적용되는 max-age
- `Age: 60 (HTTP 헤더)`
    - 오리진 서버에서 응답 후 프록시 캐시 내에 머문 시간(초)


---

# Reference

- 