|                      |                                                                                                                                                                                                                                                                                                                                                                  |
|:---------------------|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|       작성일            |                                                                                                                                                                                                                                                                                                                                                     2023-04-07   |
|          분류          |     [운영체제](%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C.md)                                                                                                                                                                                                                                                                                                                                                     |     
# Index  
---  
- [CPU](CPU.md)  
- [Direct Memory Access](Direct%20Memory%20Access.md)
# 컴퓨터 시스템 구조  
---

![Pasted image 20230407124047](%EC%B2%A8%EB%B6%80%20%ED%8C%8C%EC%9D%BC/Pasted%20image%2020230407124047.png)

## Memory
CPU 의 작업 공간. CPU 는 Memory에서 Instruction 을 읽고 Clock cycle 마다 실행 함.

## Device Controller
메모리 및 입출력 장치 등의 각 하드웨어 장치에는 Device Controller라는 것이 붙어 있다. 컨트롤러는 일종의 작은 CPU로서, **CPU 대신** 각 하드웨어 장치를 제어하는 역할을 수행한다.

- 해당 I/O 장치 유형을 관리하는 일종의 작은 CPU
- 제어 정보를 위해 Control register, Status register 를 가짐
- local buffer 를 가짐 (일종의 data regitster)

IO는 실제 device 와 local buffer 사이에서 일어난다. Device Controller 는 I/O 가 끝났을 경우 interrupt 로 CPU 에 그 사실을 알린다.

참고로, Device Driver는 CPU가 실행하는 각 디바이스에 접근하기 위한 소프트웨어를 뜻한다.

### Local Buffer
메인 CPU의 작업 공간인 메인 메모리가 있듯이 Device Controller 도 데이터를 임시로 저장하기 위한 작업 공간이 필요한데, 이를 Local Buffer가 그 역할을 한다.

### Device Driver
CPU가 실행하는 각 디바이스에 접근하기 위한 소프트웨어를 뜻한다.


## Timer
특정 프로그램의 CPU 독점을 막기 위한 장치. 실행하게 된다면 문제가 될 수 있기 때문에, Timer 라는 하드웨어를 두고 있음. 

다음과 같은 특징이 존재한다.
- 정해진 시간이 흐른 뒤 운영체제에게 제어권이 넘어가도록 인터럽트를 발생시킴
- 타이머는 매 클럭 틱마다 1씩 감소
- 타이머 값이 0 이 되면 타이머 인터럽트 발생

타이머는 현재 시간을 계산하기 위해서도 사용한다.



# 입출력의 수행
모든 입출력 명령은 특권 명령이다.

다음은 사용자 프로그램이 I/O 를 하는 과정이다.
1. 시스템 콜
	- 사용자 프로그램이 운영체제의 함수(커널)를 호출하는 것
2. trap 을 사용하여 인터럽트 벡터의 특정 위치로 이동
3. 제어권이 인터럽트 벡터가 가리키는 인터럽트 서비스의 루틴으로 이동
4. 올바른 I/O 요청인지 확인 후 I/O 수행
5. I/O 완료 시 제어권을 시스템콜 다음 명령으로 옮김

# 관련 링크
---
[Interrupt](Interrupt.md)


# 출처
---
[7. 운영체제 - 이화여자대학교 KOCW 공개 강의](http://www.kocw.net/home/search/kemView.do?kemId=1046323)
[9. [반효경 운영체제] System Structure & Program Execution 1 (tistory.com)](https://steady-coding.tistory.com/511)